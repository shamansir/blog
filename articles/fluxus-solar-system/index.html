<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta charset="utf-8" />

<meta name="author" content="Ulric Wilfred" />
<meta name="description" content="Blog about programming and only about it. No word about onion. At all. Totally none." />
<meta name="generator" content="mynt v0.2.3-dev" />

<link rel="author me ext" href="http://shamansir.github.com" />
<link rel="contents start home" href="/blog/" />
<link rel="index" href="/blog/archives/" />

<link rel="shortcut icon" href="/blog/assets/img/favicon.png" type="image/x-icon" />

<link rel="alternate" href="/blog/feed.xml" type="application/atom+xml" />

<link rel="stylesheet" href="/blog/assets/css/screen.css" media="screen, projection" type="text/css" />
<link rel="stylesheet" href="/blog/assets/css/print.css" media="print" type="text/css" />
  <!--[if IE]>
      <link rel="stylesheet" href="/blog/assets/css/ie.css" media="screen, projection" type="text/css" />
  <![endif]-->
<link rel="stylesheet" href="/blog/assets/css/pygments.trac.css" type="text/css" />

<!-- Font Awesome - http://fortawesome.github.com/Font-Awesome -->
<link rel="stylesheet" href="/blog/assets/css/font-awesome.css" />


    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-20770637-4']);
        _gaq.push(['_trackPageview']);
        
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    
    <title>nwao — Modelling a Solar System in Fluxus &ndash; No word about onion</title>

</head>

<body>
    <div id="nwao-page">
        <div id="nwao-header">
            <div id="nwao-holder">
                <nav id="nwao-nav"><ul>
                    <li><a href="/blog/" rel="contents" title="Blog"><i class="icon-home"></i>&nbsp;Blog</a></li>
                    <li><a href="/blog/archives/" rel="index" title="Archives"><i class="icon-book"></i>&nbsp;Archives</a></li>
                    <li><a href="http://shamansir.github.com" rel="author" title="Author"><i class="icon-user"></i>&nbsp;Author</a></li>
                    <!-- TODO: TAGS PAGE -->
                    <li><a href="/blog/feed.xml" title="Feed"><i class="icon-rss"></i>&nbsp;Feed</a></li>
                </ul></nav>

                <h1 id="nwao-title"><a href="/blog/" title="No word about onion">&raquo;No word about onion&laquo;</a></h1>
            </div>
            <div id="nwao-subtitle"><span>shaman.sir's telling you about stuff</span></div>
        </div>

        <!--
        <nav>
          <div id="nwao-dive">
            <a href="#" id="nwao-prev">← Previous post</a><span> | </span>
            <a href="#" id="nwao-next">Next post →</a>
          </div>
        </nav>
        -->
        
        <div id="nwao-content">
            
    <article id="nwao-post">
        <div class="nwao-post-header">
            <h2 class="nwao-post-title" id="top">
                <a href="#top" title="Modelling a Solar System in Fluxus">
                    Modelling a Solar System in Fluxus
                </a>
            </h2>
            <dl>
    <dt class="nwao-hidden">Published at</dt>
    <dd class="nwao-published"><i class="icon-time"></i>&nbsp;06 December 2010, Monday</dd>
    
    <dt class="nwao-hidden">Tags</dt>
    <dd class="nwao-tags">
    
        <a href="/blog/tags/fluxus/" rel="tag" title="Posts with 'fluxus' tag"><i class="icon-tag"></i>&nbsp;fluxus</a><span class="nwao-hidden">,</span> 
    
        <a href="/blog/tags/graphics/" rel="tag" title="Posts with 'graphics' tag"><i class="icon-tag"></i>&nbsp;graphics</a><span class="nwao-hidden">,</span> 
    
        <a href="/blog/tags/lecture/" rel="tag" title="Posts with 'lecture' tag"><i class="icon-tag"></i>&nbsp;lecture</a><span class="nwao-hidden">,</span> 
    
        <a href="/blog/tags/livecoding/" rel="tag" title="Posts with 'livecoding' tag"><i class="icon-tag"></i>&nbsp;livecoding</a><span class="nwao-hidden">,</span> 
    
        <a href="/blog/tags/racket/" rel="tag" title="Posts with 'racket' tag"><i class="icon-tag"></i>&nbsp;racket</a><span class="nwao-hidden">,</span> 
    
        <a href="/blog/tags/scheme/" rel="tag" title="Posts with 'scheme' tag"><i class="icon-tag"></i>&nbsp;scheme</a>
    
    </dd>
    
</dl>
        </div>
        
        <div class="nwao-post-content">
            <p>Some time ago I <a href="#post-about-fluxus">wrote a post</a> about <a href="http://www.pawfal.org/fluxus/">fluxus</a>, livecoding and 3D-prototyping system. Now I want to demonstrate some of its features and describe how you may use them in pseudo(;))scientific needs. For example, you can create a model of a simplified solar system and make it fit in only 125 lines of code (including comments) &ndash; it is the advantage of <a href="http://racket-lang.org/">Racket</a> language with graphic steroids, the core of fluxus and a descendant of PLT Scheme. Here how the result will look like:</p>

<p><a href="/blog/figures/fluxus-solar-system/screen04.png"><img src="/blog/figures/fluxus-solar-system/screen04-thumb.png" alt="Screenshot 01"></a></p>

<p><a href="/blog/figures/fluxus-solar-system/screen05.png"><img src="/blog/figures/fluxus-solar-system/screen05-thumb.png" alt="Screenshot 02"></a></p>

<p>There are sources in the post, a short desription of code structure, tutorial movies in Slavic English, examining in detail the whole process of writing this complicated (;)) code.</p>
<h3 id="sources"><a href="#sources" title="Sources">Sources</a></h3>
<p><a href="http://paste.pocoo.org/show/301220/">HERE</a></p>

<blockquote>
<p>Note: Since it was lost with the Poocoo, I&#39;ll try to restore it from video.</p>
</blockquote>
<h3 id="description"><a href="#description" title="Description">Description</a></h3>
<p>Fluxus uses a term of state machine for scene construction. If you have programmed in OpenGL already, you are familiar with this principle - every next function in the code either modifies the matrix of scene state or changes the content of the scene (i.e. draws an object). You may construct the required scene objects just before any rendering will happen and then change their conditions later or just draw a new primitives in every frame (OpenGL understands that it may cache the objects which state is not changed a lot between frames). I am using the both ways of these, so I prepare the text labels and planets&#39; orbits before rendering process but I draw planets in every new frame.</p>

<p>I have taken all the data about equatorial diameters, orbital radiuses and orbital periods of the planets from the single one table in <a href="http://en.wikipedia.org/wiki/Planet#Solar_System">Wikipedia article</a>. It is very handy that all parameters are presented relatively to Earth properties (that is how astronomical units are calculated), so the Earth diameter and Earth year can be used as system of units in our model.</p>

<blockquote>
<p>Do you know that distance from mass center of Earth to mass center of Sun is approximately equal to 11740 Earth diameters? It is the astronomical unit (<code>astro-unit</code> constant) and the distances from Sun to planets are measured relativey to it. And more, 109 Earth diameters fits the diameter of Sun (the Earth diameter is represented with <code>diameter-factor</code> constant in the model).</p>
</blockquote>

<p>When we know this data, we can calculate the angles for planets positions (the orbital eccentricities are not taken in account in the model, it&#39;s a homework) and place them appropriately in the model.</p>
<h3 id="examining-code"><a href="#examining-code" title="Examining code">Examining code</a></h3>
<ul>
<li><code>star</code>, <code>planet</code> and planetary system (it is called <code>star-system</code> because the center of it is a star), consisting of star and planets, structures are defined</li>
<li>defined functions of

<ul>
<li>getting translate vector (<code>qtv</code> - <em>quick translate vector</em>) for planet using its orbital radius and orbital period</li>
<li>getting scale vector (<code>qsv</code> - <em>quick scale vector</em>) of planet using its diameter</li>
<li>fast calculation of planet position angle (<code>curang</code>), relatively to (Sun) (0, 0) point, using planet&#39;s orbital period</li>
<li>building orbit primitive (<code>build-orbit</code>) using its orbital radius</li>
<li>building label primitive (<code>qto</code> - _quick text object) for planet using the passed string</li>
</ul></li>
<li>the star of Sun is created, planets and all of them are put into &ldquo;solar system&rdquo; instance (<code>solar-system</code>). while filling planets structures, the labels primitives are built for each one.</li>
<li>using the planets data the orbits are built</li>
<li>functions are defined

<ul>
<li><code>draw-star</code>, it draws a star</li>
<li><code>draw-planet</code>, it draws a planet in the required position depending on current time and moving the text label in the same position</li>
</ul></li>
<li><code>render</code> function is defined, it draws sun and planets one by one, calling <code>draw-star</code> and <code>draw-planet</code></li>
<li><code>render</code> is assigned to be a function executed for each frame</li>
</ul>
<h3 id="videos"><a href="#videos" title="Videos">Videos</a></h3>
<p><iframe src="http://player.vimeo.com/video/17502661" width="400" height="300" frameborder="0"></iframe><p><a href="http://vimeo.com/17502661">Fluxus Livecoding: Building 3D Solar System / Part 1</a> from <a href="http://vimeo.com/shamansir">Ulric Wilfred</a> on <a href="http://vimeo.com">Vimeo</a>.</p></p>

<p><iframe src="http://player.vimeo.com/video/17515694" width="400" height="300" frameborder="0"></iframe><p><a href="http://vimeo.com/17515694">Fluxus Livecoding: Building 3D Solar System / Part 2</a> from <a href="http://vimeo.com/shamansir">Ulric Wilfred</a> on <a href="http://vimeo.com">Vimeo</a>.</p></p>

<p><iframe src="http://player.vimeo.com/video/17516078" width="400" height="300" frameborder="0"></iframe><p><a href="http://vimeo.com/17516078">Fluxus Livecoding: Building 3D Solar System / Part 3</a> from <a href="http://vimeo.com/shamansir">Ulric Wilfred</a> on <a href="http://vimeo.com">Vimeo</a>.</p></p>

        </div>
    </article>

        </div>
        
        
            <ul id="nwao-social">
    <li><a href="https://twitter.com/#!/shaman_sir" title="Twitter profile"><img src="/blog/assets/img/social/twitter.png" width="16" height="16" alt="Twitter profile"></a></li>
    <li><a href="https://github.com/shamansir" title="Github profile"><img src="/blog/assets/img/social/github.png" width="16" height="16" alt="GitHub profile"></a></li>                
    
    <li><a href="https://www.facebook.com/shaman.sir" title="Facebook profile"><img src="/blog/assets/img/social/facebook.png" width="16" height="16" alt="Facebook profile"></a></li>
    
    
    <li><a href="http://stackoverflow.com/users/167262" title="Stackoverflow profile"><img src="/blog/assets/img/social/stack-overflow.png" width="16" height="16" alt="Stack Overflow profile"></a></li>
    
</ul>
        

        <div id="nwao-footer">
            <p>Copyright &copy; 2013 Ulric Wilfred &ndash; powered by <a href="http://mynt.mirroredwhite.com/">mynt</a></p>
        </div>

        <div id="nwao-jump-to-top"><a href="#top" title="Jump to top">&#x2912;</a></div>

        <!--
        <script type="text/javascript" src="/blog/assets/js/scrolls.js"></script>
        <script type="text/javascript" src="/blog/assets/js/page.scrolls.js"></script> -->


        </script>
    </div>

    <div id="nwao-onion"></div>
</body>
</html>