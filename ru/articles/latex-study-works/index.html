


<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />

<meta name="author" content="Ulric Wilfred" />
<meta name="description" content="Блог о программировании и только о нём. Ни слова о луке. Ни одного. Вообще." />
<meta name="generator" content="mynt v0.3.1" />

<link rel="author me ext" href="http://shamansir.github.io" />
<link rel="contents start home" href="/blog/ru/" />
<link rel="index" href="/blog/ru/archives/" />

<link rel="shortcut icon" href="/blog/ru/assets/img/favicon.png" type="image/x-icon" />

<link rel="alternate" href="/blog/ru/feed.xml" type="application/atom+xml" />



<link rel="stylesheet" href="/blog/ru/assets/css/screen.css" media="screen, projection" type="text/css" />
<link rel="stylesheet" href="/blog/ru/assets/css/print.css" media="print" type="text/css" />
  <!--[if IE]>
      <link rel="stylesheet" href="/blog/ru/assets/css/ie.css" media="screen, projection" type="text/css" />
  <![endif]-->
<link rel="stylesheet" href="/blog/ru/assets/css/pygments.trac.css" type="text/css" />


    
        <!-- WebFonts -->
        <link rel="stylesheet" href="//cloud.webtype.com/css/aeaf962b-fb56-4a2d-af48-f7da7a5ede31.css" type="text/css" />
    

    
        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-20770637-6', 'auto');
            ga('send', 'pageview');
        </script>
    






    <title>nwao — Подготовка учебных документов в LaTeX &ndash; Ни слова о луке</title>

</head>

<body>

    <header id="nwao-header">
    <nav id="nwao-nav" role="site-navigation"><ul>
        <li><a href="/blog/ru/" rel="contents" title="Blog">Блог</a></li>
        <li><a href="/blog/ru/archives/" rel="index" title="Архив">Архив</a></li>
        <li><a href="/blog/ru/tags/" title="Метки">Метки</a></li>
        <li><a href="http://shamansir.github.com" rel="author" title="Автор">Автор</a></li>
        <li><a href="/blog/ru/feed.xml" title="Лента RSS">RSS</a></li>
    </ul></nav>

    <h1 id="nwao-title"><a href="/blog/ru/" title="Ни слова о луке">Ни слова о луке</a></h1>
    <div id="nwao-subtitle"><span>сэр шаман рассказывает о чём может</span></div>
</header>

    <ul id="nwao-lang-switch">
        <li><a href="/blog/ru/../" title="English Version">English Version</a></li>
        <li>Russian Version</li>
    </ul>

    <div id="top"></div>

    
        <nav role="breadcrumbs" id="nwao-breadcrumbs">
            
    <ul>
        
            
            

            <li><a href="/blog/ru/">Блог</a></li>
        
            
            

            <li><a href="/blog/ru/articles">Статьи</a></li>
        
            
            

            <li>Подготовка учебных документов в ...</li>
        
    </ul>

        </nav>
    

    
        <nav role="dive" id="nwao-dive">
            
    <ul>
        
            <li id="nwao-prev">
                <a href="/blog/ru/articles/recovering-psi-password-python/"
                   title="Восстановление пароля в клиенте Psi (Python)">Предыдущая статья</a>
            </li>
        
        
            <li id="nwao-next">
                <a href="/blog/ru/articles/10-useful-solutions-for-android-developer/"
                   title="10 полезных решений для разработчика под Android">Следующая статья</a>
            </li>
        
    </ul>

        </nav>
    

    
        <nav role="table-of-contents" id="nwao-toc">
            <h3>Содержание:</h3><a href="#top" title="наверх">(наверх)</a>
            
    
        
            
            
                <ul>
                    
                        
    
        
            
            <li>
                <a href="#section" title="Установка">Установка</a>
                
            </li>
        
    

                    
                        
    
        
            
            <li>
                <a href="#section-2" title="Титульная страница">Титульная страница</a>
                
            </li>
        
    

                    
                        
    
        
            
            <li>
                <a href="#section-3" title="Схемы">Схемы</a>
                
            </li>
        
    

                    
                        
    
        
            
            <li>
                <a href="#pgf" title="Пакеты pgf">Пакеты pgf</a>
                
                    <ul>
                        
                            
    
        
            
            <li>
                <a href="#section-4" title="Таблицы">Таблицы</a>
                
            </li>
        
    

                        
                            
    
        
            
            <li>
                <a href="#section-5" title="Графики">Графики</a>
                
            </li>
        
    

                        
                    </ul>
                
            </li>
        
    

                    
                        
    
        
            
            <li>
                <a href="#section-6" title="Заключение">Заключение</a>
                
            </li>
        
    

                    
                <ul>
            
        
    

        </nav>
    

    <section id="nwao-content" class="nwao-post">
        
    <article>
        <header class="nwao-post-header">
    <h2 class="nwao-post-title">
        <a href="/blog/ru/articles/latex-study-works/" title="Подготовка учебных документов в LaTeX">Подготовка учебных документов в LaTeX</a>
    </h2>
    <dl class="nwao-post-infoline">
    <dt class="nwao-published">Опубликован</dt>
    <dd class="nwao-published">
        <a href="/blog/ru/archives/2010/"
           title="20 февраля 2010, суббота. 23:14">
           <time datetime="%d-%m-%Y" pubdate>20 фев 2010</time>
        </a>
    </dd>
    
        <dt class="nwao-tags-title">Метки</dt>
        <dd>
            <div class="nwao-tags">
                
                    <a href="/blog/ru/tags/gnumeric/" rel="tag"
                       title="Статьи с меткой 'gnumeric'">gnumeric</a>
                    
                        <span class="tag-count">1</span>
                    
                    
                        <span class="nwao-comma">,</span>
                    
                
                    <a href="/blog/ru/tags/latex/" rel="tag"
                       title="Статьи с меткой 'latex'">latex</a>
                    
                        <span class="tag-count">1</span>
                    
                    
                        <span class="nwao-comma">,</span>
                    
                
                    <a href="/blog/ru/tags/pgfplots/" rel="tag"
                       title="Статьи с меткой 'pgfplots'">pgfplots</a>
                    
                        <span class="tag-count">1</span>
                    
                    
                
            </div>
        </dd>
    
</dl>
</header>

        <div class="nwao-post-content">
            <p>В этой статье я вкратце расскажу об общих способах при подготовке различных учебных документов в LaTeX, а конкретно - о подготовке титульной страницы, вставке векторных рисунков (схем), вставке таблиц и вставке графиков, создающихся на основе подготовленных данных, занесённых или даже вычисляемых в электронной таблице.</p>

<p>Процесс будет рассматриваться со стороны Ubuntu/TeX Live, хотя всё рассказанное можно будет сделать и в Windows с использованием MikTeX и на Маке с использованием MacTeX. Также я затрону дополнительные open-source пакеты (версии которых, опять же, есть для всех операционных систем), которые помогут в процессе и опишу какие действия необходимо предпринять, чтобы получившийся в результате документ выглядел максимально близко к желаемому :). Это <a href="http://www.inkscape.org">Inkscape</a>, <a href="http://www.gnome.org/gnumeric">Gnumeric</a> и пакеты <a href="http://pgfplots.sourceforge.net"><code>pgfplots</code></a> и <a href="http://pgfplots.sourceforge.net"><code>pgfplotstable</code></a> для LaTex.</p>

<p>Если вы в первый раз используете LaTeX, рекомендую стандартный <a href="http://www.rpi.edu/dept/arc/docs/latex/latex-intro.pdf">вводный документ</a> <em>(англ., PDF)</em> и небольшой <a href="http://en.wikibooks.org/wiki/LaTeX/Formatting">справочник по форматированию текста</a> <em>(англ.)</em>. В качестве документации к <code>pgfplots</code> подойдёт официальная: <a href="http://pgfplots.sourceforge.net/pgfplots.pdf"><code>pgfplots</code></a> <em>(англ., PDF)</em>, <a href="http://pgfplots.sourceforge.net/pgfplotstable.pdf">pgplotstable</a> <em>(англ., PDF)</em>.</p>
<h3 id="section">Установка</h3>
<p>Устанавливаем LaTeX:</p>
<pre><code>$ sudo apt-get install tex-common texlive-base texlive-base-bin texlive-common \
texlive-doc-base texlive-fonts-recommended texlive-lang-cyrillic \
texlive-latex-base texlive-latex-recommended
</code></pre>
<p>Создадим тестовый документ в любом редакторе (для <code>gedit</code> вы можете установить <code>gedit-latex-plugin</code>). Условимся, что наш основной документ будет называться <code>work_0001_2010.tex</code>, а все относящиеся к нему файлы будут использовать это название + какой-либо постфикс:</p>
<pre><code>$ touch .&#x2F;work_0001_2010.tex
$ gedit .&#x2F;work_0001_2010.tex
</code></pre>
<p>Вставим представленный тект в качестве содержимого, сохраним:</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">\documentclass</span><span class="na">[a4paper,12pt]</span><span class="nb">{</span>article<span class="nb">}</span>
<span class="k">\usepackage</span><span class="na">[T2A]</span><span class="nb">{</span>fontenc<span class="nb">}</span>
<span class="k">\usepackage</span><span class="na">[utf8]</span><span class="nb">{</span>inputenc<span class="nb">}</span> <span class="c">% любая желаемая кодировка</span>
<span class="k">\usepackage</span><span class="na">[russian,english]</span><span class="nb">{</span>babel<span class="nb">}</span>
<span class="k">\usepackage</span><span class="na">[pdftex,unicode]</span><span class="nb">{</span>hyperref<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>indentfirst<span class="nb">}</span> <span class="c">% включить отступ у первого абзаца</span>

<span class="k">\title</span><span class="nb">{</span>Заголовок документа<span class="nb">}</span>
<span class="k">\author</span><span class="nb">{</span>Имя автора<span class="nb">}</span>
<span class="k">\date</span><span class="nb">{</span>02/2010<span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span> <span class="c">% начало документа</span>

<span class="k">\maketitle</span> <span class="c">% заголовок</span>

Тестовый документ, подготовленный в <span class="k">\LaTeX</span>
<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span> <span class="c">% конец документа</span>
</pre></div>
</td></tr></table></div></div>
<p>Скомпилируем и посмотрим, что получилось:</p>
<pre><code>$ pdflatex .&#x2F;work_0001_2010.tex
$ evince .&#x2F;work_0001_2010.pdf
</code></pre>
<p>Если всё было сделано правильно - перед нами готовый результат.</p>
<h3 id="section-2">Титульная страница</h3>
<p>Итак, генерируемая по умолчанию страница обычно не соответствует тому, что ожидают преподаватели или ученики. Я просто покажу шаблон и то, что должно из него получиться - результат больше похож на ожидания, но конечно, при желании или необходимости, вы можете изменить его как заблагорассудится.</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span> <span class="c">% начало документа</span>

<span class="k">\begin</span><span class="nb">{</span>titlepage<span class="nb">}</span> <span class="c">% начало титульной страницы</span>

<span class="k">\begin</span><span class="nb">{</span>center<span class="nb">}</span> <span class="c">% включить выравнивание по центру</span>

<span class="k">\large</span> Российский технический институт &lt;&lt;ACME-ТЕХ&gt;&gt;<span class="k">\\</span><span class="na">[4.5cm]</span>
<span class="c">% название института, затем отступ 4,5см</span>

<span class="k">\huge</span> Теоретическая работа <span class="k">\No</span> 5<span class="k">\\</span><span class="na">[0.6cm]</span> <span class="c">% название работы, затем отступ 0,6см</span>
<span class="k">\large</span> по~теме &lt;&lt;Хабраобщество. Внутреннее и внешнее влияние&gt;&gt;<span class="k">\\</span><span class="na">[3.7cm]</span>
<span class="c">% тема работы, затем отступ 3,7см</span>

<span class="k">\begin</span><span class="nb">{</span>minipage<span class="nb">}{</span>0.5<span class="k">\textwidth</span><span class="nb">}</span> <span class="c">% начало маленькой врезки в половину ширины текста</span>
<span class="k">\begin</span><span class="nb">{</span>flushleft<span class="nb">}</span> <span class="c">% выровнять её содержимое по левому краю</span>
<span class="k">\emph</span><span class="nb">{</span>Автор:<span class="nb">}</span> Цокотуха~Флай<span class="k">\\</span>
<span class="k">\emph</span><span class="nb">{</span>Группа:<span class="nb">}</span> 7822<span class="k">\\</span>
<span class="k">\emph</span><span class="nb">{</span>Факультет:<span class="nb">}</span> МХХПХХ<span class="k">\\</span>
<span class="k">\emph</span><span class="nb">{</span>Преподаватель:<span class="nb">}</span> Шаманова~Эллина~Канделябровна
<span class="k">\end</span><span class="nb">{</span>flushleft<span class="nb">}</span> <span class="c">% конец выравнивания по левому краю</span>
<span class="k">\end</span><span class="nb">{</span>minipage<span class="nb">}</span> <span class="c">% конец врезки</span>

<span class="k">\vfill</span> <span class="c">% заполнить всё доступное ниже пространство</span>

<span class="nb">{</span><span class="k">\large</span> <span class="k">\today</span><span class="nb">}</span> <span class="c">% вывести дату</span>
<span class="nb">{</span><span class="k">\large</span> <span class="k">\LaTeX</span><span class="nb">}</span> <span class="c">% вывести логотип LaTeX</span>

<span class="k">\end</span><span class="nb">{</span>center<span class="nb">}</span> <span class="c">% закончить выравнивание по центру</span>

<span class="k">\thispagestyle</span><span class="nb">{</span>empty<span class="nb">}</span> <span class="c">% не нумеровать страницу</span>
<span class="k">\end</span><span class="nb">{</span>titlepage<span class="nb">}</span> <span class="c">% конец титульной страницы</span>

<span class="k">\tableofcontents</span> <span class="c">% содержание</span>

<span class="k">\section</span><span class="nb">{</span>Глава I<span class="nb">}</span>
<span class="k">\section</span><span class="nb">{</span>Глава II<span class="nb">}</span>
<span class="k">\section</span><span class="nb">{</span>Глава III<span class="nb">}</span>
<span class="k">\section</span><span class="nb">{</span>Глава IV<span class="nb">}</span>

Тестовый документ, подготовленный в <span class="k">\LaTeX</span>
<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span> <span class="c">% конец документа</span>
</pre></div>
</td></tr></table></div></div>
<p>Содержание включено для примера и оно обновится в соотвествии с главами только при следующей компиляции - это правило для LaTeX. В результате всё это должно выглядеть так:</p>

<p><img src="/blog/ru/figures/latex-study-works/latex_habr_titlepage.png" alt="Титульная страница"></p>
<h3 id="section-3">Схемы</h3>
<p>Есть много способов вставить изображение в LaTeX-документ, и вам подойдёт любой из них, но так как я обо всём рассказываю, то должен рассказать хотя бы об одном. Я подготавливаю схемы в <a href="http://www.inkscape.org">Inkscape</a> (свободный векторный редактор), экспортирую их в PDF и затем вставляю в LaTeX-документ.</p>

<p>Inkscape очень удобен для подготовки схем - у прямых линий (да и у фигур и кривых) можно установить с любых концов стрелки или сделать их пунктирными (Object -&gt; Fill and Stroke -&gt; Stroke Style), сектора можно делать ограничивая углы развёртки у круга, любую фигуру можно залить стандартными для таких схем кистями (хоть в полька-точечку (Object -&gt; Fill and Stroke -&gt; Fill Style -&gt; Polka dots)), кривые удобно рисовать инструментом Кривая Безье и кроме всего прочего есть &ldquo;примагничивание&rdquo; (правда оно почему-то включается в свойствах документа (File -&gt; Document Properties -&gt; Snap)). Практически любой график или схему из методички/учебника можно перенести в векторный вид за полчаса.</p>

<p>Итак, экспорт из Inkscape. Исходный файл, по принятому ранее соглашению, назовём <code>work_0001_2010_graph01.svg</code></p>

<p>В меню File -&gt; Save as&hellip; выберем формат *.pdf:</p>

<p><img src="/blog/ru/figures/latex-study-works/latex_habr_graph01_save.png" alt="Сохранение в PDF"></p>

<p>И отметим конвертацию шрифтов в пути (в Stroke Style -&gt; Width у надписей советую ставить значения 0.1-0.3, иначе надписи в pdf-файле получаются очень толстыми):</p>

<p><img src="/blog/ru/figures/latex-study-works/latex_habr_graph01_pdf.png" alt="Опции экспорта в PDF"></p>

<p>Теперь в шапку LaTeX-документа наряду с остальными пакетами нужно добавить пакет <code>graphicx</code>:</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">\usepackage</span><span class="nb">{</span>graphicx<span class="nb">}</span>
</pre></div>
</td></tr></table></div></div>
<p>А в тело документа вставить новую картинку:</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">\newpage</span>
</pre></div>
</td></tr></table></div></div>
<p>Картинка:</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">\begin</span><span class="nb">{</span>figure<span class="nb">}</span>
<span class="k">\centering</span>
<span class="k">\includegraphics</span><span class="na">[width=0.9\textwidth]</span><span class="nb">{</span>work<span class="nb">_</span>0001<span class="nb">_</span>2010<span class="nb">_</span>graph01.pdf<span class="nb">}</span>
<span class="k">\caption</span><span class="nb">{</span>Преломление света<span class="nb">}</span>
<span class="k">\label</span><span class="nb">{</span>fig:graph01<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>figure<span class="nb">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Заново компилируем:</p>
<pre><code>$ pdflatex .&#x2F;work_0001_2010.tex
$ evince .&#x2F;work_0001_2010.pdf
</code></pre>
<p>И вот результат:</p>

<p><img src="/blog/ru/figures/latex-study-works/latex_habr_graph01_inside.png" alt="SVG-картинка в PDF"></p>
<h3 id="pgf">Пакеты pgf</h3>
<p>Пакет <code>pgfplotstable</code> помогает  очень гибко настраивать/составлять таблицы и позволяет считывать таблицу из csv-файла при компиляции.</p>

<p>Пакет <code>pgfplots</code> позволяет строить практически любые цветные настраиваемые графики на основе таблиц.</p>

<p>Установка пакетов на Windows/MikTex описана в <a href="http://pgfplots.sourceforge.net/pgfplots.pdf">документации</a> <em>(англ., PDF)</em> , в случае Ubuntu нужно сделать следующее:</p>
<pre><code>$ sudo nano &#x2F;etc&#x2F;apt&#x2F;sources.list
</code></pre>
<p>В конец файла добавить (заменять версию <code>lucid</code> на вашу не нужно):</p>
<pre><code>deb http:&#x2F;&#x2F;ppa.launchpad.net&#x2F;johannes-reinhardt&#x2F;ppa&#x2F;ubuntu lucid main
</code></pre>
<p>Выполнить:</p>
<pre><code>$ sudo apt-get update
$ sudo apt-get install pgfplots
</code></pre><h4 id="section-4">Таблицы</h4>
<p>Таблицы будем подготавливать в <a href="http://www.gnome.org/gnumeric">Gnumeric</a>. Можно использовать любой табличный редактор, главное - гибкая возможность экспорта в текстовый вид.</p>

<p>Создадим таблицу, в первых трёх столбцах которой будут различные значения, а в четвёртом столбце - среднее по этим трём значениям и сохраним её под именем <code>work_0001_2010_table01.gnumeric</code> (кстати, gnumeric умеет сохранять таблицы в формате LaTeX, но мы намереваемся использовать пакет <code>pgfplotstable</code>, поэтому не будем этого делать):</p>

<p><img src="/blog/ru/figures/latex-study-works/latex_habr_table01_save.png" alt="Сохранение gnumeric-таблицы"></p>

<p>Теперь необходимо экспортировать таблицу в текстовый файл. Важно заметить две вещи, первая: в текстовый файл импортируется только текущий лист (Sheet), вторая: для того, чтобы удобно работать со столбцами при использовании пакета <code>pgfplotstable</code>, необходимо в первой строке таблицы указать короткие однословные названия (алиасы) для столбцов.</p>

<p>Таблицу можно сохранить в CSV, но если вы используете русскую локаль в операционной системе, то дробные числа в таблице будут представлены с использованием запятой. Так что лучше сохраним файл в формате Text (configurable), а назовём его, для удобства, <code>work_0001_2010_table01.dat</code></p>

<p><img src="/blog/ru/figures/latex-study-works/latex_habr_table01_savecsv.png" alt="Сохранение таблицы в CSV"></p>

<p>После этого вас спросят о дополнительных настройках - символ конца строки установите в соответствии с вашей операционной системой, разделитель - &ldquo;пробел&rdquo; и отключите кавычки.</p>

<p><img src="/blog/ru/figures/latex-study-works/latex_habr_table01_export.png" alt="Параметры экспорта для CSV"></p>

<p>В результате должен получиться такой файл:</p>
<pre><code>
a b c mid
0.09 0.07 0.072 0.0773333333333333
0.15 0.073 0.073 0.0986666666666667
0.155 0.074 0.8 0.343
0.156 0.078 0.9 0.378
0.17 0.079 0.99 0.413
0.18 0.08 0.1 0.12
0.189 0.09 0.12 0.133
0.192 0.1 0.14 0.144
0.195 0.12 0.153 0.156
0.2 0.128 0.16 0.162666666666667

</code></pre>
<p>Теперь можно вставить таблицу в LaTeX-документ. Добавьте в заголовок:</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">\usepackage</span><span class="nb">{</span>pgfplotstable<span class="nb">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Теперь, в теле документа, настроим вывод у пакета pgf (запятые в качестве дробных разделитей, округление до шести знаков) и загрузим файл с данными, привязав его к алиасу <code>midvalues</code>:</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">\pgfkeys</span><span class="nb">{</span>/pgf/number format/.cd,precision=6,use comma,fixed,1000 sep=<span class="nb">{}}</span>

<span class="k">\pgfplotstableread</span><span class="nb">{</span>work<span class="nb">_</span>0001<span class="nb">_</span>2010<span class="nb">_</span>table01.dat<span class="nb">}</span><span class="k">\midvalues</span>
</pre></div>
</td></tr></table></div></div>
<p>Теперь опишем саму таблицу:</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">\newpage</span>

Таблица

<span class="k">\begin</span><span class="nb">{</span>table<span class="nb">}</span>[h]
<span class="k">\centering</span>
<span class="k">\caption</span><span class="nb">{</span>Средние числа<span class="nb">}</span>
<span class="k">\pgfplotstabletypeset</span>[
    columns=<span class="nb">{</span>a,b,c,mid<span class="nb">}</span>,  <span class="c">% алиасы колонок, определённые в первой строке таблицы</span>
    columns/a/.style=<span class="nb">{</span> column name=Значение <span class="s">$</span><span class="nb">a</span><span class="s">$</span> <span class="nb">}</span>, <span class="c">% стиль столбца: определяем только заголовок</span>
    columns/b/.style=<span class="nb">{</span> column name=Значение <span class="s">$</span><span class="nb">b</span><span class="s">$</span> <span class="nb">}</span>, <span class="c">% стиль столбца: определяем только заголовок</span>
    columns/c/.style=<span class="nb">{</span> column name=Значение <span class="s">$</span><span class="nb">c</span><span class="s">$</span> <span class="nb">}</span>, <span class="c">% стиль столбца: определяем только заголовок</span>
    columns/mid/.style=<span class="nb">{</span> column name=Среднее значение <span class="nb">}</span>, <span class="c">% стиль столбца: определяем только заголовок</span>
    every head row/.style=<span class="nb">{</span> before row=<span class="k">\hline</span>, after row=<span class="k">\hline\hline</span> <span class="nb">}</span>, <span class="c">% одиночная линия над и двойная линия под первой строкой таблицы</span>
    every last row/.style=<span class="nb">{</span> after row=<span class="k">\hline</span> <span class="nb">}</span>, <span class="c">% одиночная линия под последней строкой таблицы</span>
    every first column/.style=<span class="nb">{</span>
        column type/.add=<span class="nb">{</span>|<span class="nb">}{}</span> <span class="c">% вертикальная линия перед первым столбцом</span>
    <span class="nb">}</span>,
    every last column/.style=<span class="nb">{</span>
        column type/.add=<span class="nb">{</span>|<span class="nb">}{</span>|<span class="nb">}</span> <span class="c">% вертикальные линии с обоих сторон последнего столбца</span>
    <span class="nb">}</span>
]<span class="k">\midvalues</span> <span class="k">\\</span><span class="na">[0.5cm]</span>
<span class="k">\label</span><span class="nb">{</span>tab:midvalues<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>table<span class="nb">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Снова перекомпилируем файл, и вот результат:</p>

<p><img src="/blog/ru/figures/latex-study-works/latex_habr_table01_rendered.png" alt="Как выглядит таблица"></p>
<h4 id="section-5">Графики</h4>
<p>В завершение построим график по данной таблице.</p>

<p>Добавьте в заголовок документа:</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">\usepackage</span><span class="nb">{</span>pgfplots<span class="nb">}</span>
<span class="k">\pgfplotsset</span><span class="nb">{</span>compat=newest<span class="nb">}</span> <span class="c">% использовать новые возможности pgfplots</span>
</pre></div>
</td></tr></table></div></div>
<p>И, в тело документа:</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">\newpage</span>

<span class="k">\begin</span><span class="nb">{</span>tikzpicture<span class="nb">}</span>
    <span class="k">\begin</span><span class="nb">{</span>axis<span class="nb">}</span>[ <span class="c">% начать график</span>
        xlabel=Измерение, <span class="c">% метка для оси x</span>
        ylabel=Значение, <span class="c">% метка для оси y</span>
        xtick align=center, <span class="c">% риски оси x внутри графика</span>
        yminorgrids, ymajorgrids, <span class="c">% линии для основных и второстепенных значений по оси y</span>
        xmajorgrids, <span class="c">% линии для основных значений по оси x</span>
        minor y tick num=4, <span class="c">% 4 второстепенных риски между каждыми основными рисками по оси y</span>
        legend style=<span class="nb">{</span>at=<span class="nb">{</span>(0.74,0.74)<span class="nb">}</span>, anchor=south west<span class="nb">}</span> <span class="c">% позиционирование легенды относительно нижнего левого угла</span>
    ],
    <span class="k">\addplot</span><span class="na">[green!40!black,mark=x]</span> table[y=a] from <span class="k">\midvalues</span>; <span class="c">% тёмно-зелёным отметить данные из столбца &#39;a&#39; таблицы midvalues на оси</span>
    <span class="k">\addlegendentry</span><span class="nb">{</span><span class="s">$</span><span class="nb">a</span><span class="s">$</span> (таб. <span class="k">\ref</span><span class="nb">{</span>tab:midvalues<span class="nb">}</span>)<span class="nb">}</span> <span class="c">% добавить линию на легенду</span>
    <span class="k">\addplot</span><span class="na">[red!60!black,mark=x]</span> table[y=b] from <span class="k">\midvalues</span>; <span class="c">% тёмно-красным отметить данные из столбца &#39;b&#39; таблицы midvalues на оси</span>
    <span class="k">\addlegendentry</span><span class="nb">{</span><span class="s">$</span><span class="nb">b</span><span class="s">$</span> (таб. <span class="k">\ref</span><span class="nb">{</span>tab:midvalues<span class="nb">}</span>)<span class="nb">}</span> <span class="c">% добавить линию на легенду</span>
    <span class="k">\addplot</span><span class="na">[yellow!80!black,mark=x]</span> table[y=c] from <span class="k">\midvalues</span>; <span class="c">% тёмно-жёлтым отметить данные из столбца &#39;c&#39; таблицы midvalues на оси</span>
    <span class="k">\addlegendentry</span><span class="nb">{</span><span class="s">$</span><span class="nb">c</span><span class="s">$</span> (таб. <span class="k">\ref</span><span class="nb">{</span>tab:midvalues<span class="nb">}</span>)<span class="nb">}</span> <span class="c">% добавить линию на легенду</span>
    <span class="k">\addplot</span><span class="na">[blue!80!black,mark=o,smooth]</span> table[y=mid] from <span class="k">\midvalues</span>; <span class="c">% тёмно-синим сглаженной линией отметить данные из столбца &#39;mid&#39; таблицы midvalues на оси</span>
    <span class="k">\addlegendentry</span><span class="nb">{</span>Среднее (таб. <span class="k">\ref</span><span class="nb">{</span>tab:midvalues<span class="nb">}</span>)<span class="nb">}</span>  <span class="c">% добавить линию на легенду</span>
    <span class="k">\end</span><span class="nb">{</span>axis<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>tikzpicture<span class="nb">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Мы указываем только значения для оси y и pgf автоматически подбирает значения на оси x, но в команде <code>addplot</code> также можно указать и столбец-источник для оси x: <code>table[x=mid,y=b]</code></p>

<p>Снова перекомпиляция, и теперь мы видим отличный график-за-пять-минут по нашим значениям (значения я подбирал наугад, поэтому выглядят они не очень удачно (чуть лучше на графике с логарифмическими осями, однако задание сделать его таковым я лучше оставлю вам на дом), но надеюсь суть понятна).</p>

<p><img src="/blog/ru/figures/latex-study-works/latex_habr_plot01_rendered.png" alt="Как выглядит график"></p>

<p>Я привёл лишь простейший пример, но пакет <code>pgfplots</code> обладает настолько широкими возможностями, что если вы заинтересованы в данной теме, то вы просто обязаны хотя бы очень подробно рассмотреть всё <a href="http://pgfplots.sourceforge.net/pgfplots.pdf">руководство по пакету</a> <em>(англ., PDF)</em>.</p>
<h3 id="section-6">Заключение</h3>
<p>Итак, LaTeX и <code>pgfplots</code> - удобный способ оформлять не только текстовые документы с формулами, но и целые работы со схемами, графиками и таблицами. Причём делать их просто и удобно. Желаю вам большого количества полезных и легко созданных научных работ!</p>

        </div>
    </article>

    </section>

    
        <ul id="nwao-social">
    <li><a href="https://twitter.com/#!/shaman_sir" title="профиль в Twitter"><img src="/blog/ru/assets/img/social/twitter.png" width="16" height="16" alt="профиль в Twitter"></a></li>
    <li><a href="https://github.com/shamansir" title="профиль в Github"><img src="/blog/ru/assets/img/social/github.png" width="16" height="16" alt="профиль в GitHub"></a></li>
    
    <li><a href="https://www.facebook.com/shaman.sir" title="профиль в Facebook"><img src="/blog/ru/assets/img/social/facebook.png" width="16" height="16" alt="профиль в Facebook"></a></li>
    
    
    <li><a href="http://stackoverflow.com/users/167262" title="профиль в Stackoverflow"><img src="/blog/ru/assets/img/social/stack-overflow.png" width="16" height="16" alt="профиль на Stack Overflow"></a></li>
    
</ul>
    

    <div id="nwao-jump-to-top"><a href="#top" title="Наверх">Наверх</a></div>

    <footer id="nwao-footer">
        <p>Copyright &copy; 2014 Ulric Wilfred; запитано <a href="http://mynt.mirroredwhite.com/" title="mynt">mynt</a> и <a href="http://input.fontbureau.com/" title="шрифты Input">шрифтами Input</a></p>
    </footer>

    <!--
    <script type="text/javascript" src="/blog/ru/assets/js/scrolls.js"></script>
    <script type="text/javascript" src="/blog/ru/assets/js/page.scrolls.js"></script> -->

</body>
</html>