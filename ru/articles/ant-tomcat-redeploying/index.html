


<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />

<meta name="author" content="Ulric Wilfred" />
<meta name="description" content="Блог о программировании и только о нём. Ни слова о луке. Ни одного. Вообще." />
<meta name="generator" content="mynt v0.3.1" />

<link rel="author me ext" href="http://shamansir.github.io" />
<link rel="contents start home" href="/blog/ru/" />
<link rel="index" href="/blog/ru/archives/" />

<link rel="shortcut icon" href="/blog/ru/assets/img/favicon.png" type="image/x-icon" />

<link rel="alternate" href="/blog/ru/feed.xml" type="application/atom+xml" />



<link rel="stylesheet" href="/blog/ru/assets/css/screen.css" media="screen, projection" type="text/css" />
<link rel="stylesheet" href="/blog/ru/assets/css/print.css" media="print" type="text/css" />
  <!--[if IE]>
      <link rel="stylesheet" href="/blog/ru/assets/css/ie.css" media="screen, projection" type="text/css" />
  <![endif]-->
<link rel="stylesheet" href="/blog/ru/assets/css/pygments.trac.css" type="text/css" />


    
        <!-- WebFonts -->
        <link rel="stylesheet" href="//cloud.webtype.com/css/aeaf962b-fb56-4a2d-af48-f7da7a5ede31.css" type="text/css" />
    

    
        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-20770637-6', 'auto');
            ga('send', 'pageview');
        </script>
    






    <title>nwao — Редеплойинг приложения на Tomcat средствами Ant &ndash; Ни слова о луке</title>

</head>

<body>

    <header id="nwao-header">
    <nav id="nwao-nav" role="site-navigation"><ul>
        <li><a href="/blog/ru/" rel="contents" title="Blog">Блог</a></li>
        <li><a href="/blog/ru/archives/" rel="index" title="Архив">Архив</a></li>
        <li><a href="/blog/ru/tags/" title="Метки">Метки</a></li>
        <li><a href="http://shamansir.github.com" rel="author" title="Автор">Автор</a></li>
        <li><a href="/blog/ru/feed.xml" title="Лента RSS">RSS</a></li>
    </ul></nav>

    <h1 id="nwao-title"><a href="/blog/ru/" title="Ни слова о луке">Ни слова о луке</a></h1>
    <div id="nwao-subtitle"><span>сэр шаман рассказывает о чём может</span></div>
</header>

    <ul id="nwao-lang-switch">
        <li><a href="/blog/ru/../" title="English Version">English Version</a></li>
        <li>Russian Version</li>
    </ul>

    <div id="top"></div>

    
        <nav role="breadcrumbs" id="nwao-breadcrumbs">
            
    <ul>
        
            
            

            <li><a href="/blog/ru/">Блог</a></li>
        
            
            

            <li><a href="/blog/ru/articles">Статьи</a></li>
        
            
            

            <li>Редеплойинг приложения на...</li>
        
    </ul>

        </nav>
    

    
        <nav role="dive" id="nwao-dive">
            
    <ul>
        
            <li id="nwao-prev">
                <a href="/blog/ru/articles/vim-python-windows-compilation/"
                   title="[g]Vim в режиме Python: Рекомпиляция в Windows">Предыдущая статья</a>
            </li>
        
        
            <li id="nwao-next">
                <a href="/blog/ru/articles/javascript-oop/"
                   title="ООП и JavaScript">Следующая статья</a>
            </li>
        
    </ul>

        </nav>
    

    
        <nav role="table-of-contents" id="nwao-toc">
            <h3>Содержание:</h3><a href="#top" title="наверх">(наверх)</a>
            
    
        
            
            
        
    

        </nav>
    

    <section id="nwao-content" class="nwao-post">
        
    <article>
        <header class="nwao-post-header">
    <h2 class="nwao-post-title">
        <a href="/blog/ru/articles/ant-tomcat-redeploying/" title="Редеплойинг приложения на Tomcat средствами Ant">Редеплойинг приложения на Tomcat средствами Ant</a>
    </h2>
    <dl class="nwao-post-infoline">
    <dt class="nwao-published">Опубликован</dt>
    <dd class="nwao-published">
        <a href="/blog/ru/archives/2007/"
           title="25 сентября 2007, вторник">
           <time datetime="%d-%m-%Y" pubdate>25 сен 2007</time>
        </a>
    </dd>
    
        <dt class="nwao-tags-title">Метки</dt>
        <dd>
            <div class="nwao-tags">
                
                    <a href="/blog/ru/tags/ant/" rel="tag"
                       title="Статьи с меткой ''">ant</a>
                    
                        <span class="tag-count">2</span>
                    
                    
                        <span class="nwao-comma">,</span>
                    
                
                    <a href="/blog/ru/tags/java/" rel="tag"
                       title="Статьи с меткой ''">java</a>
                    
                        <span class="tag-count">11</span>
                    
                    
                        <span class="nwao-comma">,</span>
                    
                
                    <a href="/blog/ru/tags/tomcat/" rel="tag"
                       title="Статьи с меткой ''">tomcat</a>
                    
                        <span class="tag-count">1</span>
                    
                    
                
            </div>
        </dd>
    
</dl>
</header>

        <div class="nwao-post-content">
            <p>Процесс разработки нашего проекта обладает одним минусом, свойственным многим J2EE-проектам: при изменении кода проекта и пересборке его сервер не сразу подхватывает обновку, а требует полного останова себя, очистки кэша, запуска себя по-новой и передеплойинга пакета.</p>

<p>Для того чтобы не делать это каждый раз ручками есть несколько простых способов: например, те же скрипты (batch’и для windows и shell-скрипты для linux). Но мне показалось более простым сделать так, чтобы делал это сам собирающий ant-скрипт (сценарий?): одно нажатие клавиши и все просходит автоматически…</p>

<p>(версия для windows)</p>

<p>Поэтому я взял скрипт существующий и стал его править. Пришлось столкнуться с несколькими проблемами/хитростями ant’а на windows (опытному в ant’о-строении человеку они конечно нипочем :) ), в результате чего получился рабочий скрипт, выдержки из которого я и разберу ниже.</p>

<p>Вот &ndash; файл <code>build.properties</code>. Он содержит некоторые значения, которые возможно будут часто меняться и поэтому лучше хранить их отдельно от ant-срипта.</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># имя пакета</span>
<span class="na">war.name</span> <span class="o">=</span> <span class="s">SomeProjectPackage</span>

<span class="c1"># путь к JDK</span>
<span class="na">java.home</span> <span class="o">=</span> <span class="s">&quot;C:\Worktable\Java\jdk1.5.0_12&quot;</span>
<span class="c1"># путь к корневому каталогу сервера</span>
<span class="na">server.dir</span> <span class="o">=</span> <span class="s">C:/Worktable/Java/apache-tomcat-5.5.25</span>
<span class="c1"># скрипт, использующийся для запуска сервера</span>
<span class="na">server.command</span> <span class="o">=</span> <span class="s">catalina.bat</span>

<span class="c1"># путь к расположению проекта</span>
<span class="na">root.dir</span> <span class="o">=</span> <span class="s">C:/Workspace/SomeProject</span>
<span class="c1"># путь к месту, куда на сервере будет выкладываться пакет</span>
<span class="na">deploy.dir</span> <span class="o">=</span> <span class="s">${server.dir}/webapps/</span>

<span class="c1"># настройки JPDA (удаленнный дебаггинг может осуществляться</span>
<span class="c1"># (например, средствами Eclipse) подключением к указанному порту)</span>
<span class="na">jpda.transport</span> <span class="o">=</span> <span class="s">dt_socket</span>
<span class="na">jpda.port</span> <span class="o">=</span> <span class="s">56666</span>

<span class="c1"># путь к библиотекам проекта</span>
<span class="na">lib.dir</span> <span class="o">=</span> <span class="s">${root.dir}/lib/</span>
<span class="c1"># путь к временному месту сборки проекта</span>
<span class="na">dist.dir</span> <span class="o">=</span> <span class="s">${root.dir}/dist/</span>
<span class="c1"># путь к каталогу с веб-содержимым - страницами, скриптами и т.п.</span>
<span class="na">web.dir</span> <span class="o">=</span> <span class="s">${root.dir}/WebContent/</span>
</pre></div>
</td></tr></table></div></div>
<p>Теперь по частям рассмотрим сам скрипт. В заголовке - включаем наш файл <code>.properties</code>.</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

    <span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">&quot;SomeProject&quot;</span> <span class="na">default=</span><span class="s">&quot;redeploy&quot;</span> <span class="na">basedir=</span><span class="s">&quot;.&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">file=</span><span class="s">&quot;build.properties&quot;</span><span class="nt">/&gt;</span>

    . . .
</pre></div>
</td></tr></table></div></div>
<p>Далее идут цели сборки (<code>build</code>), очистки временных каталогов, использованных при сборке (<code>clean</code>) и цель пересборки - очищающая, а затем собирающая (<code>rebuild</code>). Их подробное рассмотрение не относится к цели статьи :).</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    . . .

    <span class="c">&lt;!-- Compiles project with all dependencies. --&gt;</span>

    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;build&quot;</span>
            <span class="na">description=</span><span class="s">&quot;--&gt; compiles project with all dependencies&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">&quot;${dist.dir}&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">&quot;${dist.dir}/classes&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;javac</span> <span class="na">source=</span><span class="s">&quot;1.5&quot;</span>
            <span class="na">srcdir=</span><span class="s">&quot;${root.dir}/src&quot;</span>
            <span class="na">destdir=</span><span class="s">&quot;${dist.dir}/classes&quot;</span>
            <span class="na">debug=</span><span class="s">&quot;on&quot;</span>
            <span class="na">verbose=</span><span class="s">&quot;false&quot;</span>
            <span class="na">optimize=</span><span class="s">&quot;on&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;classpath&gt;</span>
                <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;${lib.dir}&quot;</span> <span class="na">includes=</span><span class="s">&quot;**/*.jar&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/classpath&gt;</span>
        <span class="nt">&lt;/javac&gt;</span>
    <span class="nt">&lt;/target&gt;</span>

    <span class="c">&lt;!-- Cleans the build. --&gt;</span>

    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;clean&quot;</span>
            <span class="na">description=</span><span class="s">&quot;--&gt; cleans the build&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;delete</span> <span class="na">quiet=</span><span class="s">&quot;true&quot;</span> <span class="na">dir=</span><span class="s">&quot;${dist.dir}&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/target&gt;</span>

    <span class="c">&lt;!-- Rebuild. --&gt;</span>

    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;rebuild&quot;</span> <span class="na">depends=</span><span class="s">&quot;clean,build&quot;</span>
            <span class="na">description=</span><span class="s">&quot;--&gt; [clean, build]&quot;</span><span class="nt">/&gt;</span>

    . . .
</pre></div>
</td></tr></table></div></div>
<p>А вот, собственно, наши подчиненные &ndash; цели деплойинга (выкладывания нового пакета на сервер), де-деплойинга (забирания старого пакета с сервера) и пере-деплойинга (забирания старого, а потом выкладывания нового).</p>

<p>При выкладывании (<code>deploy</code>) мы компилируем код (<code>depends=&quot;build&quot;</code>), затем создаем на сервере каталог для логов, собираем пакет из скомпилированных исходников (командой <code>jar</code>), выкладывая его во временный каталог, а затем запускаем сервер. Для Windows сервер из ant-скрипта может быть запущен только в своем окружении, для этого приходится вызывать его командой <code>cmd /c catalina.bat jpda start</code>, через команду ant’а <code>exec</code> (аргументы должны быть разделены командами <code>arg</code> именно так, как представлено ниже &ndash; для того чтобы <code>exec</code> обернул команду <code>catalina jpda start</code> в кавычки, для ее целостности). Также серверу нужно передать несколько переменных окружения, что мы и делаем, используя команды <code>env</code>. Сервер мы запускаем в отдельном потоке (<code>spawn=&quot;true&quot;</code> &ndash; иначе скрипт будет ожидать от сервера команды завершения и не будет производить дальнейших действий) и в чистом виде (не через ява-машину - <code>vmlauncher=&quot;false&quot;</code>). Сервер запущен, можно выложить туда пакет и удалить временные каталоги и файлы (последовательность команд <code>copy</code> и двух <code>delete</code>).</p>

<p>Для выгрузки пакета с сервера (<code>undeploy</code>) мы останавливаем серевер по правилам, описанным выше (при остановке мы можем не указывать переменные окружения для JPDA и подолждать пока сервер остановится; но если что-то не вышло &ndash; это нормально &ndash; возможно сервер и не был запущен (<code>failifexecutionfails=&quot;false&quot;</code>)). Затем мы очищаем каталог на сервере, в которые он распаковывал наш пакет, удаляем сам пакет и очищаем кэш сервера.</p>

<p>При перевыладке (<code>redeploy</code>) - цели по умолчанию - старая версия пакета удаляется с сервера (<code>undeploy</code>), очищаются временные каталоги (<code>clean</code>), и пакет собирается и выкладывается на сервер (<code>deploy</code>).</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    . . .

    <span class="c">&lt;!-- Prepares deployment --&gt;</span>

    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;pre-deploy&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">&quot;${dist.dir}/war&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">&quot;${dist.dir}/war/WEB-INF&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">&quot;${dist.dir}/war/WEB-INF/classes&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">&quot;${dist.dir}/war/WEB-INF/lib&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;copy</span> <span class="na">todir=</span><span class="s">&quot;${dist.dir}/war&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;${web.dir}&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;include</span> <span class="na">name=</span><span class="s">&quot;**/*.*&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/fileset&gt;</span>
        <span class="nt">&lt;/copy&gt;</span>
        <span class="nt">&lt;copy</span> <span class="na">todir=</span><span class="s">&quot;${dist.dir}/war/WEB-INF/classes&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;${dist.dir}/classes&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;include</span> <span class="na">name=</span><span class="s">&quot;**/*.*&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/fileset&gt;</span>
        <span class="nt">&lt;/copy&gt;</span>
        <span class="nt">&lt;copy</span> <span class="na">todir=</span><span class="s">&quot;${dist.dir}/war/WEB-INF/lib&quot;</span> <span class="na">flatten=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;${lib.dir}&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;include</span> <span class="na">name=</span><span class="s">&quot;**/*.jar&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/fileset&gt;</span>
        <span class="nt">&lt;/copy&gt;</span>
    <span class="nt">&lt;/target&gt;</span>

    <span class="c">&lt;!-- Deploys application on server. --&gt;</span>

    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;deploy&quot;</span> <span class="na">depends=</span><span class="s">&quot;rebuild, pre-deploy&quot;</span>
            <span class="na">description=</span><span class="s">&quot;--&gt; deploys application on server&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">&quot;${server.dir}/logs&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;jar</span> <span class="na">jarfile=</span><span class="s">&quot;${war.name}.war&quot;</span> <span class="na">basedir=</span><span class="s">&quot;${dist.dir}/war&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;exec</span> <span class="na">dir=</span><span class="s">&quot;${server.dir}/bin&quot;</span> <span class="na">executable=</span><span class="s">&quot;cmd&quot;</span>
                <span class="na">vmlauncher=</span><span class="s">&quot;false&quot;</span> <span class="na">spawn=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;env</span> <span class="na">key=</span><span class="s">&quot;JAVA_HOME&quot;</span> <span class="na">value=</span><span class="s">&quot;${java.home}&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;env</span> <span class="na">key=</span><span class="s">&quot;JPDA_TRANSPORT&quot;</span> <span class="na">value=</span><span class="s">&quot;${jpda.transport}&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;env</span> <span class="na">key=</span><span class="s">&quot;JPDA_ADDRESS&quot;</span> <span class="na">value=</span><span class="s">&quot;${jpda.port}&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;env</span> <span class="na">key=</span><span class="s">&quot;CATALINA_HOME&quot;</span> <span class="na">value=</span><span class="s">&quot;${server.dir}&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">&quot;/c&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">&quot;${server.command} jpda start&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/exec&gt;</span>

        <span class="nt">&lt;copy</span> <span class="na">file=</span><span class="s">&quot;${war.name}.war&quot;</span> <span class="na">todir=</span><span class="s">&quot;${deploy.dir}&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;delete</span> <span class="na">dir=</span><span class="s">&quot;${dist.dir}&quot;</span> <span class="na">failonerror=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;delete</span> <span class="na">file=</span><span class="s">&quot;${war.name}.war&quot;</span> <span class="na">failonerror=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/target&gt;</span>

    <span class="c">&lt;!-- Un-deploys application from server. --&gt;</span>

    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;undeploy&quot;</span>
            <span class="na">description=</span><span class="s">&quot;--&gt; un-deploys application from server&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;exec</span> <span class="na">dir=</span><span class="s">&quot;${server.dir}/bin&quot;</span> <span class="na">executable=</span><span class="s">&quot;cmd&quot;</span>
                <span class="na">failifexecutionfails=</span><span class="s">&quot;false&quot;</span> <span class="na">vmlauncher=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;env</span> <span class="na">key=</span><span class="s">&quot;JAVA_HOME&quot;</span> <span class="na">value=</span><span class="s">&quot;${java.home}&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;env</span> <span class="na">key=</span><span class="s">&quot;CATALINA_HOME&quot;</span> <span class="na">value=</span><span class="s">&quot;${server.dir}&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">&quot;/c&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">&quot;${server.command} stop&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/exec&gt;</span>

        <span class="nt">&lt;delete</span> <span class="na">quiet=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;${deploy.dir}&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;include</span> <span class="na">name=</span><span class="s">&quot;${war.name}*&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/fileset&gt;</span>
        <span class="nt">&lt;/delete&gt;</span>

        <span class="nt">&lt;delete</span> <span class="na">dir=</span><span class="s">&quot;${deploy.dir}/${war.name}&quot;</span> <span class="na">failonerror=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;delete</span> <span class="na">file=</span><span class="s">&quot;${deploy.dir}/${war.name}.war&quot;</span> <span class="na">failonerror=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;delete</span> <span class="na">dir=</span><span class="s">&quot;${server.dir}/work/Catalina&quot;</span> <span class="na">failonerror=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/target&gt;</span>

    <span class="c">&lt;!-- Re-deploys application on server. --&gt;</span>

    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;redeploy&quot;</span>
            <span class="na">depends=</span><span class="s">&quot;undeploy,clean,deploy&quot;</span>
            <span class="na">description=</span><span class="s">&quot;--&gt; [undeploy,clean,deploy]&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/target&gt;</span>

    <span class="nt">&lt;/project&gt;</span>

<span class="nt">&lt;/xml&gt;</span>
</pre></div>
</td></tr></table></div></div>
<p>Собственно, все :)</p>

<p><strong>P.S.</strong> Действительно, как мне подсказывают, есть <a href="http://tomcat.apache.org/tomcat-5.5-doc/deployer-howto.html#Deploying%20using%20the%20Client%20Deployer%20Package">Tomcat Client Deployer</a> &ndash; пакет, имеющий свои средства (в том числе таски) для деплоинга через Ant, но требующий сервер быть всегда запущенным.</p>

<p>И конечно же, чтобы избежать новых претензий, есть дополнительные средства, облегчающие этот процесс вроде <a href="http://cruisecontrol.sourceforge.net/">CruiseControl</a> и так далее - при большом количестве проектов и действительно большой команде они бы, возможно, были бы хорошим решением (пока у меня такого опыта [к счастью?] нет).</p>

<p>А ещё у <a href="http://maven.apache.org/">Maven</a> есть, например, <a href="http://maven.apache.org/maven-1.x/plugins/war/goals.html">war-плагин</a>. Я об этом тоже знаю, правда-правда :).</p>

        </div>
    </article>

    </section>

    
        <ul id="nwao-social">
    <li><a href="https://twitter.com/#!/shaman_sir" title="профиль в Twitter"><img src="/blog/ru/assets/img/social/twitter.png" width="16" height="16" alt="профиль в Twitter"></a></li>
    <li><a href="https://github.com/shamansir" title="профиль в Github"><img src="/blog/ru/assets/img/social/github.png" width="16" height="16" alt="профиль в GitHub"></a></li>
    
    <li><a href="https://www.facebook.com/shaman.sir" title="профиль в Facebook"><img src="/blog/ru/assets/img/social/facebook.png" width="16" height="16" alt="профиль в Facebook"></a></li>
    
    
    <li><a href="http://stackoverflow.com/users/167262" title="профиль в Stackoverflow"><img src="/blog/ru/assets/img/social/stack-overflow.png" width="16" height="16" alt="профиль на Stack Overflow"></a></li>
    
</ul>
    

    <div id="nwao-jump-to-top"><a href="#top" title="Наверх">Наверх</a></div>

    <footer id="nwao-footer">
        <p>Copyright &copy; 2017 Ulric Wilfred; запитано <a href="http://mynt.mirroredwhite.com/" title="mynt">mynt</a> и <a href="http://input.fontbureau.com/" title="шрифты Input">шрифтами Input</a></p>
    </footer>

    <!--
    <script type="text/javascript" src="/blog/ru/assets/js/scrolls.js"></script>
    <script type="text/javascript" src="/blog/ru/assets/js/page.scrolls.js"></script> -->

</body>
</html>